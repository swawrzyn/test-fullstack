"use strict";(self.webpackChunkwiredcraft_test_fullstack=self.webpackChunkwiredcraft_test_fullstack||[]).push([[790],{2790:(e,t,r)=>{r.r(t),r.d(t,{default:()=>O});var n=r(885),i=r(7294),a=r(6974),s=r(5861),l=r(7757),o=r.n(l),c=r(2705),u=r.n(c),d=r(3379),f=r.n(d),m=r(7795),p=r.n(m),x=r(569),h=r.n(x),y=r(3565),v=r.n(y),b=r(9216),w=r.n(b),g=r(4589),j=r.n(g),k=r(5455),A={};A.styleTagTransform=j(),A.setAttributes=v(),A.insert=h().bind(null,"head"),A.domAPI=p(),A.insertStyleElement=w(),f()(k.Z,A),k.Z&&k.Z.locals&&k.Z.locals;var N=r(4530),S=r(2991),Z=r(5018),C=r(4184),T=r.n(C),E=r(1358),I=r(5893);function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function q(){var e=(0,S.TL)(),t=(0,a.s0)(),r=(0,S.CG)((function(e){return e.talks.status})),l=(0,S.CG)((function(e){return e.talks.error})),c=(0,i.useState)({title:"",description:""}),d=(0,n.Z)(c,2),f=d[0],m=d[1],p=(0,i.useState)({title:"",description:""}),x=(0,n.Z)(p,2),h=x[0],y=x[1],v=(0,i.useState)(!1),b=(0,n.Z)(v,2),w=b[0],g=b[1];(0,i.useEffect)((function(){w&&"succeeded"===r?(t("/"),E.A.show({title:"Talk added!",content:"Your talk has been successfully added!",type:"success",duration:3e3})):w&&"failed"===r&&(y({title:l.indexOf("Key (title)")>-1?"This talk title already exists. Please choose another.":"",description:""}),g(!1))}),[w,r]);var j=u().object({title:u().string().min(4).max(64).required(),description:u().string().min(10).max(200).required()}),k=function(){y({title:"",description:""});var e=j.validate(f,{abortEarly:!1}).error;if(g(!0),e){var t,r={title:"",description:""},n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}(e.details);try{for(n.s();!(t=n.n()).done;){var i=t.value;"title"===i.context.key?r.title=i.message:"description"===i.context.key&&(r.description=i.message)}}catch(e){n.e(e)}finally{n.f()}return y(r),g(!1),!1}return!0},A=function(){var t=(0,s.Z)(o().mark((function t(r){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),m({title:f.title.trim(),description:f.title.trim()}),k()){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e((0,Z.n_)(f));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),C=T()({error:!!h.title}),q=T()({error:!!h.description});return(0,I.jsx)("div",{className:"flex items-center justify-center flex-col w-full",children:(0,I.jsxs)("form",{className:"add-form",onSubmit:A,children:[(0,I.jsx)("input",{type:"text",className:C,name:"title",placeholder:"Title",onChange:function(e){var t=e.target,r=f;"title"===t.name?r.title=t.value:"description"===t.name&&(r.description=t.value),m(r)}}),(0,I.jsx)("span",{className:"w-full text-red text-left py-2",children:h.title||" "}),(0,I.jsx)("textarea",{name:"description",className:q,placeholder:"Description",rows:3,onChange:function(e){var t=f;t.description=e.target.value,m(t)}}),(0,I.jsx)("span",{className:"w-full text-red text-left py-2",children:h.description||" "}),(0,I.jsx)("div",{className:"w-full flex items-center justify-end py-4",children:(0,I.jsx)("button",{type:"submit",className:"bg-blue px-6 py-3 text-white",children:w?(0,I.jsx)("div",{className:"px-3 py-2",children:(0,I.jsx)(N.Z,{large:!1})}):"Add"})})]})})}var G=r(4185);function O(){var e,t=(0,S.CG)((function(e){return e.user.loggedIn})),r=(0,a.s0)(),s=(0,i.useState)(!0),l=(0,n.Z)(s,2),o=l[0],c=l[1];return(0,i.useEffect)((function(){t?c(!1):(r("/auth",{replace:!0}),E.A.show({title:"Login Required",content:"You must login before adding a new talk.",type:"error",duration:3e3}))}),[]),e=o?(0,I.jsx)(G.default,{}):(0,I.jsxs)("div",{className:"flex flex-col items-center justify-center w-full",children:[(0,I.jsx)("h1",{className:"text-3xl",children:"Add a New Talk"}),(0,I.jsx)(q,{})]}),(0,I.jsx)("div",{children:e})}},5455:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(8081),i=r.n(n),a=r(3645),s=r.n(a)()(i());s.push([e.id,".add-form{box-sizing:border-box;width:75%;display:flex;flex-direction:column;align-items:center;justify-content:center}.add-form input,.add-form textarea{min-width:100%;max-width:100%}@media(max-width: 1024px){.add-form{width:100%;margin:0 8px}}",""]);const l=s}}]);