"use strict";(self.webpackChunkwiredcraft_test_fullstack=self.webpackChunkwiredcraft_test_fullstack||[]).push([[790],{2790:(e,t,r)=>{r.r(t),r.d(t,{default:()=>D});var n=r(885),i=r(7462),a=r(7294),s=r(6974),l=r(5861),o=r(7757),c=r.n(o),u=r(2705),d=r.n(u),f=r(3379),m=r.n(f),p=r(7795),x=r.n(p),h=r(569),y=r.n(h),v=r(3565),b=r.n(v),w=r(9216),g=r.n(w),j=r(4589),k=r.n(j),A=r(5455),N={};N.styleTagTransform=k(),N.setAttributes=b(),N.insert=y().bind(null,"head"),N.domAPI=x(),N.insertStyleElement=g(),m()(A.Z,N),A.Z&&A.Z.locals&&A.Z.locals;var Z=r(4530),S=r(2991),C=r(5018),T=r(4184),E=r.n(T),I=r(1358),_=r(5893);function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function G(){var e=(0,S.TL)(),t=(0,s.s0)(),r=(0,S.CG)((function(e){return e.talks.status})),i=(0,S.CG)((function(e){return e.talks.error})),o=(0,a.useState)({title:"",description:""}),u=(0,n.Z)(o,2),f=u[0],m=u[1],p=(0,a.useState)({title:"",description:""}),x=(0,n.Z)(p,2),h=x[0],y=x[1],v=(0,a.useState)(!1),b=(0,n.Z)(v,2),w=b[0],g=b[1];(0,a.useEffect)((function(){w&&"succeeded"===r?(t("/"),I.A.show({title:"Talk added!",content:"Your talk has been successfully added!",type:"success",duration:3e3})):w&&"failed"===r&&(y({title:i.indexOf("Key (title)")>-1?"This talk title already exists. Please choose another.":"",description:""}),g(!1))}),[w,r]);var j=d().object({title:d().string().min(4).max(64).required(),description:d().string().min(10).max(200).required()}),k=function(){y({title:"",description:""});var e=j.validate(f,{abortEarly:!1}).error;if(g(!0),e){var t,r={title:"",description:""},n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?q(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}(e.details);try{for(n.s();!(t=n.n()).done;){var i=t.value;"title"===i.context.key?r.title=i.message:"description"===i.context.key&&(r.description=i.message)}}catch(e){n.e(e)}finally{n.f()}return y(r),g(!1),!1}return!0},A=function(){var t=(0,l.Z)(c().mark((function t(r){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),m({title:f.title.trim(),description:f.title.trim()}),k()){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e((0,C.n_)(f));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),N=E()({error:!!h.title}),T=E()({error:!!h.description});return(0,_.jsx)("div",{className:"flex items-center justify-center flex-col w-full",children:(0,_.jsxs)("form",{className:"add-form",onSubmit:A,children:[(0,_.jsx)("input",{type:"text",className:N,name:"title",placeholder:"Title",onChange:function(e){var t=e.target,r=f;"title"===t.name?r.title=t.value:"description"===t.name&&(r.description=t.value),m(r)}}),(0,_.jsx)("span",{className:"w-full text-red text-left py-2",children:h.title||" "}),(0,_.jsx)("textarea",{name:"description",className:T,placeholder:"Description",rows:3,onChange:function(e){var t=f;t.description=e.target.value,m(t)}}),(0,_.jsx)("span",{className:"w-full text-red text-left py-2",children:h.description||" "}),(0,_.jsx)("div",{className:"w-full flex items-center justify-end py-4",children:(0,_.jsx)("button",{type:"submit",className:"bg-blue px-6 py-3 text-white",children:w?(0,_.jsx)("div",{className:"px-3 py-2",children:(0,_.jsx)(Z.Z,{large:!1})}):"Add"})})]})})}var O=r(4185);function D(e){(0,i.Z)({},e);var t,r=(0,S.CG)((function(e){return e.user.loggedIn})),l=(0,s.s0)(),o=(0,a.useState)(!0),c=(0,n.Z)(o,2),u=c[0],d=c[1];return(0,a.useEffect)((function(){r?d(!1):(l("/auth",{replace:!0}),I.A.show({title:"Login Required",content:"You must login before adding a new talk.",type:"error",duration:3e3}))}),[]),t=u?(0,_.jsx)(O.default,{}):(0,_.jsxs)("div",{className:"flex flex-col items-center justify-center w-full",children:[(0,_.jsx)("h1",{className:"text-3xl",children:"Add a New Talk"}),(0,_.jsx)(G,{})]}),(0,_.jsx)("div",{children:t})}},5455:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(8081),i=r.n(n),a=r(3645),s=r.n(a)()(i());s.push([e.id,".add-form{box-sizing:border-box;width:75%;display:flex;flex-direction:column;align-items:center;justify-content:center}.add-form input,.add-form textarea{min-width:100%;max-width:100%}@media(max-width: 1024px){.add-form{width:100%;margin:0 8px}}",""]);const l=s}}]);